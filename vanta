local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local Vulkan = {}
Vulkan.__index = Vulkan

local function createTween(instance, properties, duration, style, direction)
	style = style or Enum.EasingStyle.Quad
	direction = direction or Enum.EasingDirection.Out
	return TweenService:Create(instance, TweenInfo.new(duration, style, direction), properties)
end

local function roundCorners(frame, radius)
	local uicorner = Instance.new("UICorner")
	uicorner.CornerRadius = UDim.new(0, radius)
	uicorner.Parent = frame
	return uicorner
end

function Vulkan.new(name)
	local self = setmetatable({}, Vulkan)

	-- Main ScreenGui
	self.ScreenGui = Instance.new("ScreenGui")
	self.ScreenGui.Name = name or "VulkanGUI"
	self.ScreenGui.ResetOnSpawn = false
	self.ScreenGui.DisplayOrder = 9999
	self.ScreenGui.Parent = game:GetService("CoreGui")

	-- Main Frame
	self.MainFrame = Instance.new("Frame")
	self.MainFrame.Size = UDim2.new(0, 400, 0, 300)
	self.MainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
	self.MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
	self.MainFrame.BorderSizePixel = 0
	self.MainFrame.Parent = self.ScreenGui
	roundCorners(self.MainFrame, 12)

	-- Shadow (UIStroke + UIGradient for rich design)
	local shadow = Instance.new("UIStroke")
	shadow.Thickness = 3
	shadow.Color = Color3.fromRGB(70, 70, 80)
	shadow.Transparency = 0.6
	shadow.Parent = self.MainFrame

	local gradient = Instance.new("UIGradient")
	gradient.Color = ColorSequence.new{
		ColorSequenceKeypoint.new(0, Color3.fromRGB(45, 45, 50)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(25, 25, 30))
	}
	gradient.Rotation = 90
	gradient.Parent = self.MainFrame

	-- Title Bar
	self.TitleBar = Instance.new("Frame")
	self.TitleBar.Size = UDim2.new(1, 0, 0, 36)
	self.TitleBar.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
	self.TitleBar.BorderSizePixel = 0
	self.TitleBar.Parent = self.MainFrame
	roundCorners(self.TitleBar, 12)

	self.TitleLabel = Instance.new("TextLabel")
	self.TitleLabel.Size = UDim2.new(1, -72, 1, 0)
	self.TitleLabel.Position = UDim2.new(0, 12, 0, 0)
	self.TitleLabel.BackgroundTransparency = 1
	self.TitleLabel.Text = name or "Vulkan"
	self.TitleLabel.Font = Enum.Font.GothamBold
	self.TitleLabel.TextSize = 20
	self.TitleLabel.TextColor3 = Color3.fromRGB(220, 220, 230)
	self.TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
	self.TitleLabel.Parent = self.TitleBar

	-- Close Button
	self.CloseButton = Instance.new("TextButton")
	self.CloseButton.Size = UDim2.new(0, 36, 0, 36)
	self.CloseButton.Position = UDim2.new(1, -36, 0, 0)
	self.CloseButton.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
	self.CloseButton.BorderSizePixel = 0
	self.CloseButton.Text = "âœ•"
	self.CloseButton.Font = Enum.Font.GothamBold
	self.CloseButton.TextSize = 24
	self.CloseButton.TextColor3 = Color3.fromRGB(200, 80, 80)
	self.CloseButton.Parent = self.TitleBar
	roundCorners(self.CloseButton, 12)

	self.CloseButton.MouseEnter:Connect(function()
		createTween(self.CloseButton, {BackgroundColor3 = Color3.fromRGB(200, 80, 80)}, 0.2):Play()
		createTween(self.CloseButton, {TextColor3 = Color3.fromRGB(255, 255, 255)}, 0.2):Play()
	end)
	self.CloseButton.MouseLeave:Connect(function()
		createTween(self.CloseButton, {BackgroundColor3 = Color3.fromRGB(60, 60, 70)}, 0.2):Play()
		createTween(self.CloseButton, {TextColor3 = Color3.fromRGB(200, 80, 80)}, 0.2):Play()
	end)
	self.CloseButton.MouseButton1Click:Connect(function()
		createTween(self.MainFrame, {BackgroundTransparency = 1, Size = UDim2.new(0, 0, 0, 0)}, 0.3):Play()
		wait(0.3)
		self.ScreenGui:Destroy()
	end)

	-- Container for tabs and content
	self.ContentFrame = Instance.new("Frame")
	self.ContentFrame.Size = UDim2.new(1, -24, 1, -48)
	self.ContentFrame.Position = UDim2.new(0, 12, 0, 42)
	self.ContentFrame.BackgroundTransparency = 1
	self.ContentFrame.Parent = self.MainFrame

	-- Tabs container
	self.TabsFrame = Instance.new("Frame")
	self.TabsFrame.Size = UDim2.new(1, 0, 0, 36)
	self.TabsFrame.BackgroundTransparency = 1
	self.TabsFrame.Parent = self.ContentFrame

	self.Tabs = {}
	self.TabButtons = {}
	self.CurrentTab = nil

	return self
end

function Vulkan:createTab(name)
	local tab = {}
	tab.Name = name
	tab.Content = Instance.new("Frame")
	tab.Content.Size = UDim2.new(1, 0, 1, -36)
	tab.Content.Position = UDim2.new(0, 0, 0, 36)
	tab.Content.BackgroundTransparency = 1
	tab.Content.Visible = false
	tab.Content.Parent = self.ContentFrame

	-- Tab Button
	local button = Instance.new("TextButton")
	button.Size = UDim2.new(0, 100, 1, 0)
	button.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
	button.BorderSizePixel = 0
	button.Text = name
	button.Font = Enum.Font.GothamSemibold
	button.TextSize = 16
	button.TextColor3 = Color3.fromRGB(180, 180, 190)
	button.Parent = self.TabsFrame
	roundCorners(button, 8)

	button.MouseEnter:Connect(function()
		if self.CurrentTab ~= tab then
			createTween(button, {BackgroundColor3 = Color3.fromRGB(70, 70, 80)}, 0.2):Play()
		end
	end)
	button.MouseLeave:Connect(function()
		if self.CurrentTab ~= tab then
			createTween(button, {BackgroundColor3 = Color3.fromRGB(50, 50, 60)}, 0.2):Play()
		end
	end)

	button.MouseButton1Click:Connect(function()
		self:switchTab(tab.Name)
	end)

	self.Tabs[name] = tab
	self.TabButtons[name] = button

	-- Auto switch to first tab created
	if not self.CurrentTab then
		self:switchTab(name)
	end

	return tab.Content
end

function Vulkan:switchTab(name)
	if self.CurrentTab and self.CurrentTab.Name == name then return end

	if self.CurrentTab then
		self.CurrentTab.Content.Visible = false
		local oldButton = self.TabButtons[self.CurrentTab.Name]
		createTween(oldButton, {BackgroundColor3 = Color3.fromRGB(50, 50, 60)}, 0.3):Play()
		createTween(oldButton, {TextColor3 = Color3.fromRGB(180, 180, 190)}, 0.3):Play()
	end

	local newTab = self.Tabs[name]
	if newTab then
		newTab.Content.Visible = true
		local newButton = self.TabButtons[name]
		createTween(newButton, {BackgroundColor3 = Color3.fromRGB(90, 90, 110)}, 0.3):Play()
		createTween(newButton, {TextColor3 = Color3.fromRGB(255, 255, 255)}, 0.3):Play()
		self.CurrentTab = newTab
	end
end

function Vulkan:createButton(parent, text, callback)
	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, 0, 0, 36)
	button.BackgroundColor3 = Color3.fromRGB(70, 70, 90)
	button.BorderSizePixel = 0
	button.Text = text
	button.Font = Enum.Font.GothamSemibold
	button.TextSize = 18
	button.TextColor3 = Color3.fromRGB(230, 230, 240)
	button.Parent = parent
	roundCorners(button, 10)

	button.MouseEnter:Connect(function()
		createTween(button, {BackgroundColor3 = Color3.fromRGB(100, 100, 130)}, 0.2):Play()
	end)
	button.MouseLeave:Connect(function()
		createTween(button, {BackgroundColor3 = Color3.fromRGB(70, 70, 90)}, 0.2):Play()
	end)
